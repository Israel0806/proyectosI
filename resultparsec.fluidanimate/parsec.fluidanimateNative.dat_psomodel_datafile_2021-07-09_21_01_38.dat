{"config": {"pkg": "parsec.fluidanimate", "command": "runprocess.py -p parsec.fluidanimate -i native -f 2301000,2300000,2200000,2100000,2000000,1900000,1800000,1700000,1500000,1400000,1300000,1200000,1100000,1000000,900000,800000 -r 3 1,2,3,4,5,6,7,8", "modelcommand": "memorWallTest.py", "hostname": "AsusLaptop", "savedate": "2021-07-09_21:01:38", "modelcodesource": "# -*- coding: utf-8 -*-\n\"\"\"\n    Model function example to use with parsecpy runmodel script.\n    Model for variation of input size (n) and number of cores (p).\n\n    Speedup:\n        S = 1 / ( ( 1-f(p,n) ) + f(p,n)/p + Q(p,n) )\n\n    Parallel Fraction:\n        f(p,n) = max( min((f1) + (f2)/p + (f3)*(f4)^n,1 ),0 )\n\n    Overhead:\n        Q(p,n) = (f5) + ( (f6)*p )/( (f7)^n )\n\n\"\"\"\n\nimport numpy as np\nfrom numpy.lib import math\nfrom sklearn.metrics import mean_squared_error\n\ndef calculateMu(p,m1,m2):\n    return min(m1+m2/p, 1)\n\ndef calculateRho(k, phi):\n    return 1 + k*phi\n\n# values [f, m1, m2, k]\ndef _func_speedup(param, freq, cores):\n    \"\"\"\n    Model function to calculate the speedup without overhead.\n\n    :param fparam: Actual parameters values\n    :param p: Numbers of cores used on model data\n    :param n: Problems size used on model data\n    :return: calculated speedup value\n    \"\"\"\n\n    phi = (freq / 1000000) / 2.6\n\n    #(1 − mu) + rho mu\n    up_arg=(1-calculateMu(1,param[1],param[2]))+calculateRho(param[3],phi)*calculateMu(1,param[1],param[2])\n\n    # ((1 − mu_p ) + rho mu_p ) * (1 − f ) + f/p)\n    leftSide = ((1- calculateMu(cores, param[1], param[2])) + calculateRho(param[3], phi)) * ((1-param[0])+ param[0]/cores)\n\n    # rho mu_p\n    rightSide = phi*calculateMu(cores, param[1], param[2])\n\n    #Calculate max btw below args\n    below_arg = max(leftSide, rightSide)\n\n    speedup = up_arg / below_arg\n    return speedup\n\n\ndef model(par, x):\n    \"\"\"\n    Mathematical Model function to predict the measures values.\n\n    :param par: Actual parameters values\n    :param x: inputs array\n    :param overhead: If should be considered the overhead\n    :return: Dict with input array ('x') and predicted output array ('y')\n    \"\"\"\n    pred = []\n    for f, p in x:\n        y_model = _func_speedup(par, f, p)\n        pred.append(y_model)\n    return {'x': x, 'y': pred}\n\ndef constraint_function(par, x_meas, **kwargs):\n    \"\"\"\n    Constraint function that would be considered on model.\n\n    :param par: Actual parameters values\n    :param args: Positional arguments passed for objective\n                 and constraint functions\n    :return: If parameters are acceptable based on return functions\n    \"\"\"\n\n    pred = model(par, x_meas)\n    y = pred['y']\n    # x_meas es el training_size\n    # pred es la prediccion del algoritmo\n\n    is_feasable = np.min(y) > 1\n    return is_feasable\n\n\n# Par: Particulas [f, m1, m2 k] 0-1 0-10\n# x_meas: frecuencia y cores a tomar en cuenta (ts)\n# y_meas: \ndef objective_function(par, x_meas, y_meas, **kwargs):\n    \"\"\"\n    Objective function (target function) to minimize.\n\n    :param par: Actual parameters values\n    :param args: Positional arguments passed for objective\n                 and constraint functions\n    :return: Mean squared error between measures and predicts\n    \"\"\"\n    pred = model(par, x_meas)\n    # print(\"Y_meas\")\n    # print(y_meas)\n    # print(pred['y'])\n    # print()\n    return mean_squared_error(y_meas, pred['y'])", "modelexecparams": {"algorithm": "pso", "lowervalues": "[0, 0, 0, 0]", "uppervalues": "[1, 1, 1, 10]", "threads": 4, "size": 200, "w": 0.30557280900008416, "c1": 0.30557280900008416, "c2": 1.2222912360003366, "maxiter": 100, "modelcodefilepath": "/media/israel/ExtraSpaceLinux/proyectosI/memoryWall/examples/modelfunc_example_inputsize_cores.py", "parsecpydatafilepath": "/media/israel/ExtraSpaceLinux/proyectosI/memoryWall/parsec.fluidanimateNative.dat", "verbosity": 1}, "measuresfraction": 4, "measuresfraction_points": [[1900000, 4]]}, "data": {"params": "[0.7584223892022142, 0.8458072712348803, 0.4044748781786908, 6.420702674987306]", "error": 0.3048150027991603, "errorrel": 2.571147214963885, "parsecdata": {"dims": ["frequency", "cores"], "attrs": {"pkg": "parsec.fluidanimate", "execdate": "27-06-2021_13:13:44", "command": "runprocess.py -p parsec.fluidanimate -i native -f 2301000,2300000,2200000,2100000,2000000,1900000,1800000,1700000,1500000,1400000,1300000,1200000,1100000,1000000,900000,800000 -r 3 1,2,3,4,5,6,7,8", "input_sizes": ["native"], "hostname": "AsusLaptop", "size": "static: 1"}, "data": [[1.8497395665042458, 178895.25, 2.3150319312071748, 178895.25, 178895.25, 178895.25, 2.9617560749481595], [1.8515236885134925, 177777.75, 2.285009655952469, 177777.75, 177777.75, 177777.75, 2.9377225669456584], [1.852342852948424, 176647.75, 2.3999178053345016, 176647.75, 176647.75, 176647.75, 3.030706344576742], [1.880502197183739, 220529.0, 2.401579062000871, 220529.0, 220529.0, 220529.0, 3.0515583271449196], [1.878733751338125, 204750.66666666666, 2.3287762638095884, 204750.66666666666, 204750.66666666666, 204750.66666666666, 3.0341822923870305], [1.8771758794298632, 191272.33333333334, 2.378821734606312, 191272.33333333334, 191272.33333333334, 191272.33333333334, 3.0144571983924773], [1.8723445096179048, 253610.0, 2.38647965785103, 169073.33333333334, 253610.0, 253610.0, 2.9650197582247992], [1.8669002569493107, 239766.0, 2.357870928088506, 239766.0, 239766.0, 239766.0, 2.9394074991265113], [1.8709611107228166, 227536.0, 2.2977747931067563, 227536.0, 227536.0, 227536.0, 2.918606217251044], [1.8685778221294866, 216272.0, 2.316910386201725, 216272.0, 216272.0, 216272.0, 2.893116087433448], [1.8696976012904278, 206323.0, 2.3257095836057444, 206323.0, 206323.0, 206323.0, 2.8560374302681306], [1.8645499893614508, 197171.5, 2.3134184759971608, 197171.5, 197171.5, 197171.5, 2.814464039739353], [1.642399669782429, 246695.0, 1.9412727515954642, 246695.0, 246695.0, 246695.0, 2.2335850354918154], [1.6429314275809657, 246443.0, 1.923637726069954, 246443.0, 246443.0, 246443.0, 2.229285016463437], [3.3522858276793985, 354759.0, 4.213064622437043, 354759.0, 354759.0, 354759.0, 5.17881229745117], [1.8397832897630606, 177347.75, 2.295652314612559, 236463.66666666666, 177347.75, 177347.75, 2.9584090947003183]], "coords": {"frequency": {"dims": ["frequency"], "attrs": {}, "data": [1000000, 1100000, 1200000, 1300000, 1400000, 1500000, 1700000, 1800000, 1900000, 2000000, 2100000, 2200000, 2300000, 2301000, 800000, 900000]}, "cores": {"dims": ["cores"], "attrs": {}, "data": [2, 3, 4, 5, 6, 7, 8]}}, "name": null}, "speedupmodel": {"dims": ["frequency", "cores"], "attrs": {}, "data": [[1.6108537900541582, 2.01148608468713, 2.284256807846973, 2.4902242182798977, 2.651216035679317, 2.780501462741552, 2.8866024369634165], [1.6108537900541584, 2.0122283394845173, 2.2865460006407403, 2.493652376607984, 2.6555218515399845, 2.7855057134857972, 2.8921762938269424], [1.6108537900541582, 2.0128785478195574, 2.2885536946767044, 2.4966610912002873, 2.6593025938087274, 2.789901167425911, 2.897073262165993], [1.6108537900541584, 2.0134528319567124, 2.2903288056563604, 2.499322904184919, 2.6626487882059715, 2.7937925499464056, 2.901409585571218], [1.6108537900541582, 2.0139637566986965, 2.291909536436871, 2.5016945414279603, 2.665631281812982, 2.7972618691899167, 2.9052763317709718], [1.6108537900541582, 2.0144212593042856, 2.2933261575197905, 2.5038210002228736, 2.668306314674571, 2.8003742590274565, 2.9087458582413506], [1.6108537900541584, 2.015206340345419, 2.2957596818997867, 2.507476212132733, 2.672906399538251, 2.805728026211478, 2.914715275597399], [1.6108537900541582, 2.0155456618372463, 2.296812491777821, 2.509058460278749, 2.674898411698579, 2.80804703457513, 2.917301475019292], [1.6108537900541584, 2.0158556401950145, 2.2977747931067563, 2.510505161974943, 2.6767201722957576, 2.810168173695181, 2.9196672821397973], [1.6108537900541582, 2.016139923878043, 2.298657776212914, 2.511833019586856, 2.6783926132049687, 2.8121157321328987, 2.921839717901431], [1.6108537900541582, 2.016401580561798, 2.2994708597023767, 2.5130560996045213, 2.6799333700480905, 2.813910179464288, 2.9238415595174487], [1.6108537900541584, 2.016643208280663, 2.3002220277475223, 2.514186332880485, 2.6813574064649646, 2.8155688884838064, 2.925692142111614], [1.6108537900541584, 2.016867021988696, 2.300918093147641, 2.5152339051112045, 2.6826775016869653, 2.8171066994906995, 2.9274079852576973], [1.6108537900541582, 2.0168691768280866, 2.3009247960404657, 2.5152439940665454, 2.6826902162266273, 2.8171215117719592, 2.9274245130264105], [1.6108537900541584, 2.0096343594246315, 2.2785584940520622, 2.481701888739404, 2.640521080599961, 2.768079297894517, 2.8727726319629143], [1.6108537900541584, 2.0106307487696977, 2.2816224495308215, 2.486282332451398, 2.6462675995346374, 2.7747525210900754, 2.8802009263057227]], "coords": {"frequency": {"dims": ["frequency"], "attrs": {}, "data": [800000, 900000, 1000000, 1100000, 1200000, 1300000, 1400000, 1500000, 1700000, 1800000, 1900000, 2000000, 2100000, 2200000, 2300000, 2301000]}, "cores": {"dims": ["cores"], "attrs": {}, "data": [2, 3, 4, 5, 6, 7, 8]}}, "name": null}}}